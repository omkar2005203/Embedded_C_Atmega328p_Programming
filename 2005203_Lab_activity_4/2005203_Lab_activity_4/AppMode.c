/******************************************************************************
* File Name: AppMode.c
* Description: This file contains API definitions for AppMode functionality
* Tool-Chain: AVR GCC
*
* Modification History:
* Created by:Omkar Rane 2005203 V1.0 25/Sep/20
* Description: V1.0
******************************************************************************/
/******************************************************************************
* Includes
******************************************************************************/
#include "AppMode.h"
#include "GPIO.h"
/******************************************************************************
* Defines and data types
******************************************************************************/
/******************************************************************************
* Global variables
******************************************************************************/
float x= 128.0;
/******************************************************************************
* Static variables
******************************************************************************/
/******************************************************************************
* Internal function prototypes
******************************************************************************/
/******************************************************************************
* Public functions definitions
******************************************************************************/
/******************************************************************************
* Name: AppMode()
* Description: Application mode to increment and decrement PWM signal
* Arguments: NA
* Returns: None
******************************************************************************/
void AppMode()
{
     OCR2A=x;   //50% duty cycle

            if(FLAG_BIT.GPIOPlus_ISR1==1)
            {// 10% increment logic
               FLAG_BIT.GPIOPlus_ISR1=0;
               if(x>=229.5)
               {
                   x=255;
                   OCR2A=x;
               }
               else
                {
                    x=x+25.6;
                    OCR2A=x;

                }

            }
            if(FLAG_BIT.GPIOMinus_ISR2==1)
            {// 10% decrement logic
              FLAG_BIT.GPIOMinus_ISR2=0;
              if(x>=229.5)
               {
                   x=255;
                   OCR2A=x;
               }
               else
                {
                    x=x-25.6;
                    OCR2A=x;

                }
            }


        }

/******************************************************************************
* Internal functions
******************************************************************************/
/******************************************************************************
* Name:
* Description:
******************************************************************************/
/******************************************************************************
/******************************************************************************
* End of File
******************************************************************************/
